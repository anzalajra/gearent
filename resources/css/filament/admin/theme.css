@import "tailwindcss";

@import "../../../../vendor/filament/filament/resources/css/theme.css";

@source "../../../../app/Filament/**/*.php";
@source "../../../../resources/views/filament/**/*.blade.php";
@source "../../../../vendor/filament/**/*.blade.php";
@source "../../../../vendor/octopyid/filament-palette/resources";

/* ============================================
   TOP NAVIGATION: Force single line, no wrap
   ============================================ */

/* Prevent nav items from wrapping to a new line */
.fi-topbar-nav-groups {
    flex-wrap: nowrap !important;
    overflow-x: auto !important;
    scrollbar-width: none;
    /* Firefox */
    gap: 0.25rem !important;
}

.fi-topbar-nav-groups::-webkit-scrollbar {
    display: none;
    /* Chrome/Safari */
}

/* Nav items: prevent text wrapping inside each item */
.fi-topbar-item-btn {
    white-space: nowrap !important;
    padding-inline: 0.5rem !important;
}

/* Shrink brand name / logo area when space is tight */
.fi-topbar-start {
    flex-shrink: 1 !important;
    min-width: 0 !important;
    overflow: hidden !important;
}

.fi-topbar-start .fi-logo {
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
}

/* Shrink search & action area */
.fi-topbar-end {
    flex-shrink: 1 !important;
    min-width: 0 !important;
}

/* Make search input shrink */
.fi-topbar-end .fi-global-search {
    min-width: 8rem !important;
    max-width: 16rem !important;
}

/* ============================================
   SIDEBAR MODE: Layout & Scroll Fix
   ============================================ */

/* When no topbar: lock page to viewport, prevent body scroll */
html:has(.fi-body:not(.fi-body-has-topbar)),
html:has(.fi-body:not(.fi-body-has-topbar)) body {
    height: 100dvh !important;
    max-height: 100dvh !important;
    overflow: hidden !important;
}

.fi-body:not(.fi-body-has-topbar) .fi-layout {
    height: 100dvh !important;
    overflow: hidden !important;
}

/* Sidebar: sticky, full height, internal scroll */
.fi-body:not(.fi-body-has-topbar) .fi-sidebar.fi-main-sidebar.fi-sidebar-open {
    position: sticky !important;
    top: 0 !important;
    height: 100dvh !important;
    max-height: 100dvh !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
}

/* Sidebar nav: extra bottom padding so items don't hide behind the island */
.fi-body:not(.fi-body-has-topbar) .fi-sidebar-nav {
    flex: 1 !important;
    overflow-y: auto !important;
    min-height: 0 !important;
    padding-bottom: 5rem !important;
}

/* Content area: independent scroll */
.fi-body:not(.fi-body-has-topbar) .fi-main-ctn {
    overflow-y: auto !important;
    height: 100dvh !important;
    max-height: 100dvh !important;
}

/* ============================================
   SIDEBAR MODE: Dynamic Island (Floating Footer)
   ============================================ */

/* Transform the footer into a floating island */
.fi-body:not(.fi-body-has-topbar) .fi-sidebar-footer {
    position: absolute !important;
    bottom: 1rem !important;
    left: 0.75rem !important;
    right: 0.75rem !important;
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    justify-content: space-between !important;
    gap: 0.25rem !important;
    padding: 0.375rem 0.375rem 0.375rem 0.25rem !important;
    margin: 0 !important;
    border-radius: 9999px !important;
    border: 1px solid rgba(255, 255, 255, 0.08) !important;
    background: rgba(15, 23, 42, 0.96) !important;
    backdrop-filter: blur(16px) !important;
    -webkit-backdrop-filter: blur(16px) !important;
    box-shadow:
        0 20px 25px -5px rgb(0 0 0 / 0.12),
        0 8px 10px -6px rgb(0 0 0 / 0.08) !important;
    z-index: 50 !important;
}

/* Force text/icons inside island to white â€” but NOT the dropdown panel */
.fi-sidebar-footer>*,
.fi-sidebar-footer .fi-user-menu-trigger,
.fi-sidebar-footer .fi-user-menu-trigger *,
.fi-sidebar-footer .fi-sidebar-database-notifications-btn {
    color: rgb(248 250 252) !important;
}

/* ---- Reorder: Profile FIRST (left), Notifications AFTER ---- */
.fi-sidebar-footer .fi-user-menu {
    order: -1 !important;
    flex: 0 1 auto !important;
    min-width: 0 !important;
    overflow: visible !important;
}

/* ---- User Menu Trigger: Avatar + Name + Subtitle ---- */
.fi-sidebar-footer .fi-user-menu-trigger {
    display: flex !important;
    align-items: center !important;
    padding: 0.25rem !important;
    padding-inline-end: 0.75rem !important;
    gap: 0.5rem !important;
    border-radius: 9999px !important;
    transition: background-color 0.2s !important;
}

.fi-sidebar-footer .fi-user-menu-trigger:hover {
    background-color: rgba(255, 255, 255, 0.08) !important;
}

/* Avatar: ring color from theme palette */
.fi-sidebar-footer .fi-user-menu-trigger .fi-avatar {
    width: 2rem !important;
    height: 2rem !important;
    flex-shrink: 0 !important;
    border-radius: 9999px !important;
    outline: 2.5px solid var(--primary-500) !important;
    outline-offset: 1.5px !important;
}

/* Name text */
.fi-sidebar-footer .fi-user-menu-trigger-text {
    display: flex !important;
    flex-direction: column !important;
    font-size: 0.75rem !important;
    font-weight: 600 !important;
    line-height: 1.1 !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    color: white !important;
}

/* "Super Admin" subtitle via ::after */
.fi-sidebar-footer .fi-user-menu-trigger-text::after {
    content: 'Super Admin' !important;
    display: block !important;
    font-size: 0.5625rem !important;
    font-weight: 400 !important;
    color: rgb(148 163 184) !important;
    margin-top: 0.125rem !important;
    line-height: 1 !important;
}

/* Hide the chevron arrow */
.fi-sidebar-footer .fi-user-menu-trigger>svg {
    display: none !important;
}

/* ---- Notifications: icon-only ---- */
.fi-sidebar-footer .fi-sidebar-database-notifications-btn {
    width: 2rem !important;
    height: 2rem !important;
    padding: 0.25rem !important;
    border-radius: 9999px !important;
    transition: background-color 0.2s !important;
    flex-shrink: 0 !important;
    justify-content: center !important;
    gap: 0 !important;
    background: transparent !important;
    order: 0 !important;
}

.fi-sidebar-footer .fi-sidebar-database-notifications-btn .fi-icon {
    color: rgb(203 213 225) !important;
    width: 1.125rem !important;
    height: 1.125rem !important;
}

.fi-sidebar-footer .fi-sidebar-database-notifications-btn:hover {
    background-color: rgba(255, 255, 255, 0.08) !important;
}

.fi-sidebar-footer .fi-sidebar-database-notifications-btn:hover .fi-icon {
    color: white !important;
}

.fi-sidebar-footer .fi-sidebar-database-notifications-btn-label {
    display: none !important;
}

/* Notification badge: small dot */
.fi-sidebar-footer .fi-sidebar-database-notifications-btn-badge-ctn {
    position: absolute !important;
    top: 0.125rem !important;
    inset-inline-end: 0.125rem !important;
}

.fi-sidebar-footer .fi-sidebar-database-notifications-btn-badge-ctn .fi-badge {
    min-width: 0.5rem !important;
    height: 0.5rem !important;
    padding: 0 !important;
    font-size: 0 !important;
    border-radius: 9999px !important;
    border: 1.5px solid rgb(15 23 42) !important;
    background: rgb(244 63 94) !important;
}

/* ---- QR Scanner: positioned inside the island ---- */
.fi-body:not(.fi-body-has-topbar) .fi-sidebar.fi-main-sidebar {
    position: relative !important;
}

/* QR container: match island position and padding exactly */
.fi-sidebar.fi-main-sidebar>div:has(button[title="Scan QR Code"]) {
    position: absolute !important;
    /* Same bottom as the island (1rem) */
    bottom: 1rem !important;
    inset-inline-end: 0.75rem !important;
    z-index: 51 !important;
    /* Same vertical padding as the island so content centers at the same Y */
    padding-top: 0.375rem !important;
    padding-bottom: 0.375rem !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    /* Also account for island's 1px border */
    margin-bottom: 1px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    box-sizing: border-box !important;
}

.fi-sidebar.fi-main-sidebar button[title="Scan QR Code"] {
    width: 2rem !important;
    height: 2rem !important;
    padding: 0 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    border-radius: 9999px !important;
    transition: background-color 0.2s !important;
    color: rgb(203 213 225) !important;
}

.fi-sidebar.fi-main-sidebar button[title="Scan QR Code"]:hover {
    background-color: rgba(255, 255, 255, 0.08) !important;
    color: white !important;
}

.fi-sidebar.fi-main-sidebar button[title="Scan QR Code"] svg {
    width: 1.125rem !important;
    height: 1.125rem !important;
}

/* Make room on right side of island for the QR button */
.fi-body:not(.fi-body-has-topbar) .fi-sidebar-footer {
    padding-inline-end: 2.75rem !important;
}