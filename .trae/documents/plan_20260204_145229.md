Baik, saya akan menempatkan fitur Maintenance di dalam grup "Inventory". Berikut adalah rencana final yang sudah disesuaikan.

# Rencana Final V3: Inventory Maintenance & Fixes

## 1. Migrasi Database
Menambahkan kolom pada tabel `product_units` dan `unit_kits`:
*   `last_checked_at` (timestamp): Untuk fitur Stock Opname.
*   `maintenance_status` (string): Untuk status detail (In Repair, Waiting Parts, dll).

## 2. Fitur Maintenance (Menu Inventory)
Membuat `MaintenanceResource` baru yang dikelompokkan dalam **Navigation Group: Inventory**.
*   **Fungsi Utama:**
    *   **Dashboard List:** Menampilkan unit/kit yang butuh perhatian (Status Maintenance / Kondisi Lost/Broken).
    *   **Update Progress:** Mengubah status pengerjaan (misal: "Sedang di-service").
    *   **Resolve Issue:** Form penyelesaian (Ganti Baru/Service) -> Mengubah status kembali ke Available.
    *   **Stock Opname:** Aksi cepat untuk update `last_checked_at`.

## 3. Frontend Logic (Smart Notification)
*   Menambahkan logika `isFullyUnderMaintenance()`: Notifikasi hanya muncul jika **100% unit** produk tersebut rusak/maintenance.
*   Jika masih ada 1 unit yang jalan (meski sedang disewa), notifikasi tidak muncul.

## 4. Perbaikan Picking Operation
*   **Fix Swap:** Swap unit akan otomatis menukar kit dan dokumen delivery-nya.
*   **Sync Kondisi:** Perubahan kondisi di Picking/Return langsung tersimpan ke database Unit/Kit.
*   **Filter Kit:** Kit yang statusnya Lost/Broken tidak akan ikut terbawa saat pengambilan barang (attachKits).

Saya akan segera memulai eksekusi mulai dari migrasi database hingga implementasi fitur. Silakan konfirmasi untuk memulai.
