I have analyzed the `MaintenanceResource.php` and related models (`ProductUnit`, `UnitKit`) and prepared the following plan to implement your requests:

### 1. Update Table Columns (Maintenance Status)
I will modify the columns in the Maintenance table to better reflect the unit's status as requested:
- **Remove**: The existing `condition` and `status` columns (as you mentioned they are irrelevant).
- **Add**: A new `Maintenance Status` column with the following logic:
    - **Excellent**: If Unit is 'excellent' AND all Kits are 'excellent'.
    - **Good**: If Unit or any Kit is not 'excellent' (e.g., 'good', 'fair') but none are 'lost' or 'broken'.
    - **Unit Lost / Unit Broken**: If the Unit is 'lost' or 'broken'.
    - **Kit Lost / Kit Broken**: If any Kit is 'lost' or 'broken'.
- **Logic**: Priority will be given to "Lost/Broken" statuses. If multiple issues exist, it will show the most critical one (e.g., Unit Lost > Kit Lost).

### 2. Rename & Enhance "Manage Kit" Action
- **Rename**: Change label from "Manage Kit" to **"Manage"**.
- **Visibility**: Make it **always visible** (remove the restriction that required kits to exist).
- **Functionality**:
    - Update the form to include **Unit fields** (`condition`, `maintenance_status`, `notes`) at the top.
    - Keep the **Kits Repeater** below it, so you can manage both the Unit and its Kits in one place.

### 3. Update Action Visibility (Update Progress & Resolve Issue)
- **Logic Change**: These buttons will now appear if:
    - The **Unit** is 'broken' or 'lost' OR
    - The **Unit Status** is 'maintenance' OR
    - **Any Kit** is 'broken' or 'lost' (New addition).

### 4. Enhance "Resolve Issue" Functionality
- **Update Form**: Add the **Kits Repeater** to the "Resolve Issue" modal.
- **Purpose**: This allows you to fix/update the condition of broken kits (e.g., set them back to 'excellent' or 'good') at the same time you resolve the unit's issue, making the action relevant for kit-based maintenance.

### 5. Implementation Details
- File to edit: `app/Filament/Resources/Maintenances/MaintenanceResource.php`
- I will handle the logic for the new status column using a closure to check both the unit and its related kits.
